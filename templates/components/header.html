<!-- Navigation Header -->
<header class="bg-white shadow-sm border-b border-neutral-200 fixed w-full top-0 z-50">
    <div class="flex items-center justify-between px-6 py-4">
        <div class="flex items-center space-x-4">
            <button @click="$store.app.toggleSidebar()" class="text-neutral-600 hover:text-neutral-900" data-testid="button-toggle-sidebar">
                <i class="fas fa-bars text-lg"></i>
            </button>
            <h1 class="text-xl font-semibold text-neutral-900" data-testid="text-app-title">Warehouse Inspection System</h1>
        </div>
        <div class="flex items-center space-x-4">
            {% if user.is_authenticated %}
                <!-- Urgent Items Badge -->
                {% load core_tags %}
                {% urgent_items_count as urgent_count %}
                {% if urgent_count > 0 %}
                    <div class="bg-danger text-white px-3 py-1 rounded-full text-sm font-medium" data-testid="badge-urgent-items">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        {{ urgent_count }} Urgent Items
                    </div>
                {% endif %}
                
                <!-- User Menu -->
                <div class="relative" x-data="{ open: false }">
                    <button @click="open = !open" class="flex items-center space-x-2 text-neutral-600 hover:text-neutral-900" data-testid="button-user-menu">
                        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium">
                            {{ user.first_name|first|default:user.username|first|upper }}{{ user.last_name|first|upper }}
                        </div>
                        <span class="text-sm font-medium" data-testid="text-username">{{ user.get_full_name|default:user.username }}</span>
                        <i class="fas fa-chevron-down text-xs"></i>
                    </button>
                    <div x-show="open" @click.away="open = false" x-cloak class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-neutral-200 py-2">
                        <a href="{% url 'account_email' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-50" data-testid="link-profile-settings">Profile Settings</a>
                        <a href="{% url 'account_change_password' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-50" data-testid="link-change-password">Change Password</a>
                        <hr class="my-2 border-neutral-200">
                        <a href="{% url 'account_logout' %}" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-50" data-testid="link-logout">Logout</a>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'account_login' %}" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors" data-testid="link-login">Login</a>
            {% endif %}
        </div>
    </div>
</header>
